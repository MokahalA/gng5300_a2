{% extends 'students/base.html' %}

{% block title %}
    {% if student.pk %}
        Edit Student
    {% else %}
        Add a New Student
    {% endif %}
{% endblock %}

{% block content %}
    <h1 class="mb-4">
        {% if student.pk %}
            Edit Student
        {% else %}
            Add a New Student
        {% endif %}
    </h1>
    <form method="POST" class="needs-validation" novalidate>
        {% csrf_token %}
        <div class="mb-3">
            {{ form.first_name.label_tag }}
            {{ form.first_name }}  
            {% if form.first_name.errors %}
                <div class="text-danger">{{ form.first_name.errors }}</div>
            {% endif %}
        </div>
        <div class="mb-3">
            {{ form.last_name.label_tag }}
            {{ form.last_name }}  
            {% if form.last_name.errors %}
                <div class="text-danger">{{ form.last_name.errors }}</div>
            {% endif %}
        </div>
        <div class="mb-3">
            {{ form.email.label_tag }}
            {{ form.email }}  
            {% if form.email.errors %}
                <div class="text-danger">{{ form.email.errors }}</div>
            {% endif %}
        </div>
        <div class="mb-3">
            {{ form.date_of_birth.label_tag }}
            <input type="date" name="date_of_birth" value="{{ student.date_of_birth|date:'Y-m-d' }}" class="form-control" required>
            {% if form.date_of_birth.errors %}
                <div class="text-danger">{{ form.date_of_birth.errors }}</div>
            {% endif %}
        </div>
        <div class="mb-3">
            {{ form.enrollment_date.label_tag }}
            <input type="date" name="enrollment_date" value="{{ student.enrollment_date|date:'Y-m-d' }}" class="form-control" required>
            {% if form.enrollment_date.errors %}
                <div class="text-danger">{{ form.enrollment_date.errors }}</div>
            {% endif %}
        </div>
        <div class="mb-3">
            {{ form.grade.label_tag }}
            {{ form.grade }}  
            {% if form.grade.errors %}
                <div class="text-danger">{{ form.grade.errors }}</div>
            {% endif %}
        </div>
        <button type="submit" class="btn btn-success">Save</button>
        <a href="{% url 'student_list' %}" class="btn btn-secondary">Cancel</a>
    </form>
{% endblock %}